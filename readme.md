# Game of Life on FPGA

![Alt text](img/screen.jpg?raw=true "Title")

This project implements the classic Game of Life cellular automaton on an FPGA using Verilog. The Game of Life is a zero-player game where the evolution of cells on a grid is determined by a set of rules based on the state of neighboring cells.

## Features

- Implements the Game of Life on an FPGA
- Utilizes a double dual-port framebuffer for efficient cell state storage
- Generates a random initial state using a linear feedback shift register (LFSR)
- Displays the game state on an LCD screen using a VGA controller
- Supports a grid size of 480x272 cells

## Hardware Requirements

- FPGA development board with sufficient logic resources
- LCD screen with VGA interface
- Clock input and reset button

## Modules

![Alt text](img/top.jpg?raw=true "Title")

### TOP

The top-level module that instantiates and connects all the submodules. It takes the clock input, reset button, and LCD output signals as ports.

### div

A clock divider module that generates a divided clock signal based on the specified ratio.

### lfsr

A linear feedback shift register module that generates pseudo-random numbers for initializing the game state.

### double_dual_port_framebuffer

A dual-port framebuffer module that stores the cell states. It utilizes two Gowin_DPB (dual-port block RAM) instances to enable simultaneous read and write operations.

### vga

A VGA controller module that generates the necessary timing signals for displaying the game state on an LCD screen.

### gol

The Game of Life engine module that implements the rules and updates the cell states. It iterates over the grid, calculates the number of live neighbors for each cell, and determines the next state based on the rules.

# Implementation Details

This document provides a detailed explanation of how the Game of Life on FPGA project works and the design decisions made during its implementation.

## Project Structure

The project consists of the following main modules:

1. `TOP`: The top-level module that instantiates and connects all the submodules.
2. `gol`: The Game of Life engine module that applies the rules and updates the cell states.
3. `double_dual_port_framebuffer`: The framebuffer module that stores the cell states and allows for simultaneous read and write operations.
4. `vga`: The VGA controller module that generates the necessary timing signals for displaying the cell states on an LCD screen.
5. `div`: The clock divider module that generates divided clock signals for different parts of the system.
6. `lfsr`: The linear feedback shift register module that generates random initial states for the cells.

## Design Flow

The Game of Life simulation follows these steps:

1. **Initialization**: Upon reset, the `gol` module initializes the cell states in the framebuffer using random values generated by the `lfsr` module.

2. **State Update**: The `gol` module iterates over each cell in the grid, reads the states of the neighboring cells from the framebuffer, applies the Game of Life rules, and determines the next state of each cell.

3. **Framebuffer Update**: The updated cell states are written back to the framebuffer using the `double_dual_port_framebuffer` module. The framebuffer utilizes two Gowin_DPB (dual-port block RAM) instances to enable simultaneous read and write operations.

4. **Display**: The VGA controller module (`vga`) reads the cell states from the framebuffer and generates the necessary timing signals to display the grid on an LCD screen. The color outputs (`LCD_R`, `LCD_G`, `LCD_B`) are based on the cell states read from the framebuffer.

5. **Iteration**: Steps 2-4 are repeated continuously to simulate the evolution of the Game of Life over time.

## Clock Domains

The project utilizes multiple clock domains to optimize performance and synchronization:

- `clk`: The input clock signal used as the main system clock.
- `lcd_clk`: The divided clock signal used for the LCD display, generated by the `div` module.
- `gol_clk`: The clock signal used for the Game of Life engine, which operates at the same frequency as the input clock.
- `fb_clk`: The clock signal used for the framebuffer, which also operates at the same frequency as the input clock.

## Framebuffer

The `double_dual_port_framebuffer` module is a crucial component of the project. It utilizes two Gowin_DPB (dual-port block RAM) instances to store the cell states. The framebuffer has two ports:

- Port A: Connected to the `gol` module for updating the cell states. It allows for simultaneous read and write operations.
- Port B: Connected to the VGA controller module for reading the cell states to be displayed on the LCD screen.

The framebuffer uses an A/B selection signal (`ab`) to alternate between the two Gowin_DPB instances, ensuring that the `gol` module and VGA controller access different instances to avoid conflicts.

## Game of Life Engine

The `gol` module implements the Game of Life rules and updates the cell states. It utilizes a state machine to control the execution flow:

1. `STATE_INIT`: Initializes the cell states in the framebuffer using random values generated by the `lfsr` module.
2. `STATE_INIT_DONE`: Marks the completion of the initialization process.
3. `STATE_NEXT_CELL`: Moves to the next cell in the grid.
4. `STATE_SET_READ_ADDR`: Sets the read address for accessing the neighboring cells from the framebuffer.
5. `STATE_WAIT_FOR_READ`: Waits for the read operation to complete.
6. `STATE_READ`: Reads the neighboring cell states from the framebuffer.
7. `STATE_SET_WRITE_ADDR`: Sets the write address for updating the current cell state in the framebuffer.
8. `STATE_WRITE`: Writes the updated cell state to the framebuffer.

The `gol` module applies the Game of Life rules based on the number of live neighbors for each cell. It determines the next state of the cell and writes it back to the framebuffer.

## VGA Controller

The `vga` module generates the necessary timing signals for displaying the cell states on an LCD screen. It takes the `rst` and `lcd_clk` signals as inputs and outputs the following signals:

- `LCD_CLK`: The LCD clock signal.
- `LCD_VSYNC`: The vertical sync signal.
- `LCD_HSYNC`: The horizontal sync signal.
- `LCD_DE`: The data enable signal.
- `x`: The current pixel X-coordinate.
- `y`: The current pixel Y-coordinate.

The VGA controller module calculates the framebuffer address for the current pixel based on the `x` and `y` coordinates. It reads the cell state from the framebuffer using port B and assigns the corresponding color outputs (`LCD_R`, `LCD_G`, `LCD_B`) based on the cell state.

## Conclusion

The Game of Life on FPGA project demonstrates the implementation of the classic cellular automaton simulation on an FPGA using Verilog. By utilizing a dual-port framebuffer, multiple clock domains, and a VGA controller, the project achieves efficient simulation and display of the Game of Life on an LCD screen.

The modular design of the project allows for easy customization and expansion. Developers can modify the grid size, clock speed, and color scheme to suit their requirements. The project serves as a foundation for further exploration and experimentation with cellular automata and FPGA-based simulations.


## Usage

1. Synthesize and implement the project on your FPGA development board using the appropriate tools.
2. Connect the LCD screen to the FPGA board using the VGA interface.
3. Provide a clock input to the `CLK_IN` port and ensure it meets the required frequency.
4. Use the `BUTTON1` input as the reset button to initialize the game state.
5. The game will start automatically, and the cell states will be displayed on the LCD screen.

## Customization

- Modify the `WIDTH` and `HEIGHT` parameters in the `gol` module to change the grid size.
- Adjust the clock divider ratio in the `div` module to control the game speed.
- Customize the color scheme by modifying the assignments to `LCD_R`, `LCD_G`, and `LCD_B` in the `TOP` module.

## License

This project is open-source and available under the [MIT License](LICENSE).

## Acknowledgments

- The Game of Life was originally created by mathematician John Conway.
- The FPGA implementation is based on the Verilog language and utilizes Gowin FPGA primitives.

Feel free to explore and modify the code to enhance the functionality or adapt it to your specific requirements. Enjoy playing the Game of Life on your FPGA!


